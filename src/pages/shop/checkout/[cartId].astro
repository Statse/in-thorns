---
import { medusa } from '@/scripts/medusa'
import EcommLayout from '@/layouts/EcommLayout.astro'
import Main from '@/components/main.astro'
import Title from '@/components/title.astro'
import { Checkout } from '@/components/preact/Checkout/Checkout.tsx'

const { cartId } = Astro.params

if (!cartId) {
  return {
    status: 404
  }
}

const regionResponse = await medusa.regions
  .list()
  .catch((e) => console.error(e))

if (!regionResponse) {
  return
}

const { regions } = regionResponse
---

<EcommLayout title='checkout'>
  <Main>
    <section
      class='border-white border-2 my-16 h-auto max-w-[1000px] w-full p-16 bg-opacity-90 bg-black items-center justify-center flex flex-col gap-4'
    >
      <Title>Checkout</Title>
      <Checkout client:only='preact' regions={regions} />
    </section>
  </Main>
</EcommLayout>
