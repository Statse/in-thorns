---
import Layout from '@/layouts/Layout.astro'

const { id } = Astro.params

// Map of all available photos
const photos = {
	'1': {
		src: '/photos/exit_wounds/3E30015C-F774-41CB-A41E-FCBBF2606004.webp',
		alt: 'In Thorns - Exit Wounds'
	},
	'2': {
		src: '/photos/exit_wounds/455A8D0B-D5E4-4E9C-8002-D06F2E7D87E7.webp',
		alt: 'In Thorns - Exit Wounds'
	},
	'3': {
		src: '/photos/exit_wounds/5F0E6E7C-210E-453A-9008-48B415987CF8.webp',
		alt: 'In Thorns - Exit Wounds'
	},
	'4': {
		src: '/photos/exit_wounds/6AE5AA53-E14B-4437-AC9E-A19D624213BC.webp',
		alt: 'In Thorns - Exit Wounds'
	},
	'5': {
		src: '/photos/exit_wounds/A382B952-B517-48B9-B466-7A252ED22616.webp',
		alt: 'In Thorns - Exit Wounds'
	},
	'6': {
		src: '/photos/exit_wounds/B22BB973-351E-4D26-8A3C-067E8F1059B3.webp',
		alt: 'In Thorns - Exit Wounds'
	},
	'7': {
		src: '/photos/exit_wounds/D068D024-DAC5-4C38-A951-403E822B0797.webp',
		alt: 'In Thorns - Exit Wounds'
	},
	'8': {
		src: '/photos/exit_wounds/DA93CD43-944B-4EF9-8AC8-5B33C4DE2171.webp',
		alt: 'In Thorns - Exit Wounds'
	}
}

const photo = photos[id as keyof typeof photos]

// If photo not found, redirect to home
if (!photo) {
	return Astro.redirect('/#photos')
}

// Calculate prev/next with looping
const currentId = parseInt(id as string)
const totalPhotos = Object.keys(photos).length
const prevId = currentId === 1 ? totalPhotos : currentId - 1
const nextId = currentId === totalPhotos ? 1 : currentId + 1
---

<Layout title='In Thorns - Photos'>
	<main class='min-h-screen w-full bg-black flex items-center justify-center p-4 relative' transition:animate='none'>
		<!-- Close Button -->
		<a
			href='/#photos'
			class='fixed top-6 right-6 z-50 w-12 h-12 flex items-center justify-center bg-ew-orange/20 border-2 border-ew-orange hover:bg-ew-orange hover:border-ew-orange-light transition-all group cursor-pointer'
			aria-label='Close and return to gallery'
		>
			<svg class='w-6 h-6 text-ew-orange group-hover:text-black transition-colors' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
				<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 18L18 6M6 6l12 12'></path>
			</svg>
		</a>

		<!-- Previous Photo Button -->
		<a
			href={`/photos/${prevId}`}
			class='fixed left-6 top-1/2 -translate-y-1/2 z-50 w-12 h-12 flex items-center justify-center bg-ew-green/20 border-2 border-ew-green hover:bg-ew-green hover:border-ew-green-light transition-all group cursor-pointer'
			aria-label='Previous photo'
		>
			<svg class='w-6 h-6 text-ew-green group-hover:text-black transition-colors' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
				<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 19l-7-7 7-7'></path>
			</svg>
		</a>

		<!-- Next Photo Button -->
		<a
			href={`/photos/${nextId}`}
			class='fixed right-6 top-1/2 -translate-y-1/2 z-50 w-12 h-12 flex items-center justify-center bg-ew-green/20 border-2 border-ew-green hover:bg-ew-green hover:border-ew-green-light transition-all group cursor-pointer'
			aria-label='Next photo'
		>
			<svg class='w-6 h-6 text-ew-green group-hover:text-black transition-colors' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
				<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 5l7 7-7 7'></path>
			</svg>
		</a>

		<!-- Image Container -->
		<div class='w-full h-full max-w-7xl max-h-screen flex items-center justify-center'>
			<img
				src={photo.src}
				alt={photo.alt}
				class='max-w-full max-h-[90vh] object-contain'
			/>
		</div>

		<!-- Image info overlay -->
		<div class='fixed bottom-6 left-1/2 -translate-x-1/2 bg-black/80 backdrop-blur-sm border-2 border-ew-orange/30 px-6 py-3 z-50'>
			<p class='text-ew-cream text-sm'>{photo.alt}</p>
		</div>
	</main>
</Layout>
