---
import { medusa } from '../scripts/medusa'
import EcommLayout from '../layouts/EcommLayout.astro'

const productsResponse = await medusa.products
  .list()
  .catch((err) => console.log(err))

if (!productsResponse) {
  return new Response(null, {
    status: 404,
    statusText: 'Not found'
  })
}

const { products } = productsResponse
---

<EcommLayout title='In Thorns Web Store'>
  <main
    class='m-4 border-white text-white border-2 flex flex-col h-full flex-1'
  >
    <h1 class='font-khmer'>Products</h1>
    {products.map((p) => <div>{p.title}</div>)}
  </main>
</EcommLayout>
