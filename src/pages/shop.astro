---
import { medusa } from '../scripts/medusa'
import EcommLayout from '../layouts/EcommLayout.astro'

const productsResponse = await medusa.products
  .list()
  .catch((err) => console.log(err))

if (!productsResponse) {
  return new Response(null, {
    status: 404,
    statusText: 'Not found'
  })
}

console.log(productsResponse.products)
const { products } = productsResponse
---

<EcommLayout title='In Thorns Web Store'>
  <main>
    <h1>Products</h1>
    {products.map((p) => <div>{p.title}</div>)}
  </main>
</EcommLayout>
